<div class="mx-4 sm:mx-[6%] md:mx-[20%] top-20 pt-10">
  <header class="header top-10 text-white shadow-md flex items-center justify-between px-4 sm:px-6 lg:px-8 relative">

    <h1 class="text-4xl sm:text-5xl">
      <a href="/"><i class="fas fa-music"></i></a>
    </h1>


    <nav class="hidden md:flex font-semibold text-sm space-x-6 ">
      <a href="/" class="p-4 border-b-2 border-[#FF214F] border-opacity-0 hover:border-opacity-100 hover:text-[#FF214F] duration-200 cursor-pointer">Home</a>
      <a href="/concerts" class="p-4 border-b-2 border-[#FF214F] border-opacity-0 hover:border-opacity-100 hover:text-[#FF214F] duration-200 cursor-pointer">Concerts</a>
      <a href="/groups/users" class="p-4 border-b-2 border-[#FF214F] border-opacity-0 hover:border-opacity-100 hover:text-[#FF214F] duration-200 cursor-pointer">Groups</a>

    </nav>

    <div class="flex items-center space-x-4 md:space-x-5">

      <% if (user) { %>
      <div class="relative hidden md:block">
        <button id="profileBtn">
          <img class="h-10 w-10 rounded-full cursor-pointer" src="<%= user?.image || '/default-avatar.jpg' %>" alt="image user">
        </button>
        <div id="dropdownMenu" class="hidden absolute right-0 mt-2 w-44 bg-white text-black rounded-lg shadow-lg py-2 z-50">
          <a href="/users/<%= user?.id %>/profile" class="block px-4 py-2 hover:bg-gray-200">Profile</a>
          <% if (user?.role === "ADMIN") { %>
          <a href="/concerts/admin" class="block px-4 py-2 hover:bg-gray-200">Admin</a>
          <% } %>
          <a href="/auth/logout" class="block px-4 py-2 hover:bg-gray-200">Logout</a>
        </div>
      </div>
      <% } else { %>
      <div class="hidden md:flex items-center space-x-5">
        <a href="/auth/register" class="text-black text-md font-semibold bg-white py-2 px-4 rounded-lg shadow-md hover:shadow-lg transition duration-500 transform hover:scale-110 text-nowrap">Register</a>
        <a href="/auth/login" class="text-black text-md font-semibold bg-white py-2 px-4 rounded-lg shadow-md hover:shadow-lg transition duration-500 transform hover:scale-110 text-nowrap">Login</a>
      </div>
      <% } %>

      <!-- Mobile menu button -->
      <button id="mobileMenuBtn" class="md:hidden text-white text-2xl cursor-pointer">
        <i class="fas fa-bars"></i>
      </button>
    </div>


    <nav id="mobileMenu" class="hidden flex-col absolute top-full right-0 w-40 bg-white text-black shadow-lg z-40 md:hidden rounded-lg text-gray-600">
    <a href="/" class="block px-4 py-3 border-b border-gray-200 hover:bg-gray-100">
        <i class="fas fa-home mr-2"></i> Home
    </a>
    <a href="/concerts" class="block px-4 py-3 border-b border-gray-200 hover:bg-gray-100">
        <i class="fas fa-music mr-2"></i> Concerts
    </a>
    <a href="/groups/users" class="block px-4 py-3 border-b border-gray-200 hover:bg-gray-100">
        <i class="fas fa-music mr-2"></i> Groups
    </a>
    <% if (user) { %>
        <a href="/users/<%= user?.id %>/profile" class="block px-4 py-3 border-b border-gray-200 hover:bg-gray-100">
        <i class="fas fa-user mr-2"></i> Profil
        </a>
        <% if (user?.role === "ADMIN") { %>
        <a href="/concerts/admin" class="block px-4 py-3 border-b border-gray-200 hover:bg-gray-100">
            <i class="fas fa-cog mr-2"></i> Admin
        </a>
        <% } %>
        <a href="/auth/logout" class="block px-4 py-3 hover:bg-gray-100">
        <i class="fas fa-sign-out-alt mr-2"></i> Logout
        </a>
    <% } else { %>
        <a href="/auth/register" class="block px-4 py-3 border-b border-gray-200 hover:bg-gray-100">
        <i class="fas fa-user-plus mr-2"></i> Register
        </a>
        <a href="/auth/login" class="block px-4 py-3 hover:bg-gray-100">
        <i class="fas fa-sign-in-alt mr-2"></i> Login
        </a>
    <% } %>
    </nav>


  </header>
</div>

<script>
  const profileBtn = document.getElementById("profileBtn");
  const dropdownMenu = document.getElementById("dropdownMenu");
  const mobileMenuBtn = document.getElementById("mobileMenuBtn");
  const mobileMenu = document.getElementById("mobileMenu");

  if (profileBtn) {
    profileBtn.addEventListener("click", () => {
      dropdownMenu.classList.toggle("hidden");
    });
    document.addEventListener("click", (event) => {
      if (!profileBtn.contains(event.target) && !dropdownMenu.contains(event.target)) {
        dropdownMenu.classList.add("hidden");
      }
    });
  }

  if (mobileMenuBtn) {
    mobileMenuBtn.addEventListener("click", () => {
      mobileMenu.classList.toggle("hidden");
    });
  }
</script>
